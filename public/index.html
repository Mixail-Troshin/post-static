<!doctype html>
<html lang="ru">
  <head>
    <meta charset="utf-8" />
    <title>Post Static — трекер публикаций VC.ru</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <!-- Важно: относительные пути -->
    <style>
      *,
      *::before,
      *::after { box-sizing: border-box; }

      :root {
        --bg: #f3f4f6;
        --card: #ffffff;
        --text: #111827;
        --muted: #6b7280;
        --primary: #2563eb;
        --primary-strong: #1d4ed8;
        --danger: #b91c1c;
        --border: #e5e7eb;
        --shadow: 0 4px 12px rgba(15, 23, 42, .06);
        --radius: 12px;
      }

      html, body {
        margin: 0;
        background: var(--bg);
        color: var(--text);
        font-family: system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
      }

      .hidden { display: none !important; }

      .app {
        max-width: 1100px;
        margin: 0 auto;
        padding: 24px 16px 40px;
      }

      /* header */
      .app-header {
        border-bottom: 3px solid #dc2626;
        padding-bottom: 12px;
        margin-bottom: 20px;
      }
      .app-header h1 {
        margin: 0;
        font-size: 28px;
        font-weight: 800;
      }
      .subtitle { margin: 4px 0 0; color: var(--muted); }

      /* cards */
      .card {
        background: var(--card);
        border-radius: var(--radius);
        padding: 16px 20px;
        margin-bottom: 16px;
        box-shadow: var(--shadow);
      }
      .card--narrow { max-width: 520px; margin: 0 auto 16px; }

      /* form */
      input, select, button { font: inherit; }
      input, select {
        padding: 10px 12px;
        border-radius: 10px;
        border: 1px solid #d1d5db;
        background: #f9fafb;
        width: 100%;
      }
      input:focus, select:focus {
        outline: none;
        border-color: var(--primary);
        box-shadow: 0 0 0 2px rgba(37,99,235,.15);
      }
      .btn {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        gap: 8px;
        border: 0;
        cursor: pointer;
        padding: 10px 16px;
        border-radius: 999px;
        background: var(--primary);
        color: #fff;
        font-weight: 600;
        transition: background .15s ease, transform .05s ease;
      }
      .btn:hover { background: var(--primary-strong); }
      .btn:active { transform: translateY(1px); }
      .btn--secondary { background: #e5e7eb; color: var(--text); }
      .btn--secondary:hover { background: #d1d5db; }

      .form { width: 100%; }
      .form--vertical { display: grid; gap: 12px; }
      .form__field { display: grid; gap: 6px; }
      .form__actions { display: flex; gap: 8px; align-items: center; }

      .form-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
        gap: 12px 16px;
        align-items: end;
      }

      /* toolbar */
      .toolbar {
        display: flex;
        flex-wrap: wrap;
        align-items: center;
        justify-content: space-between;
        gap: 8px;
      }
      .toolbar__title { margin: 0; font-size: 20px; font-weight: 700; }
      .toolbar__right { display: flex; align-items: center; gap: 8px; }
      .status-label { font-size: 13px; color: var(--muted); }

      /* hints */
      .hint { margin: 6px 0 0; font-size: 12px; color: var(--muted); }
      .error { margin: 8px 0 0; color: var(--danger); font-size: 14px; }

      /* filter */
      .filter-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
        gap: 12px 16px;
        align-items: end;
      }

      /* stats */
      .stats-card {
        color: #eaf2ff;
        background: linear-gradient(135deg, #2563eb 0%, #1d4ed8 50%, #0f766e 100%);
      }
      .stats-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
        gap: 12px;
      }
      .stat__label { font-size: 13px; opacity: .9; }
      .stat__value { font-size: 22px; font-weight: 700; }

      /* table */
      .table-wrapper { overflow-x: auto; }
      .articles-table {
        width: 100%;
        border-collapse: collapse;
        font-size: 14px;
      }
      .articles-table th, .articles-table td {
        padding: 10px 10px;
        border-bottom: 1px solid var(--border);
      }
      .articles-table th {
        text-align: left;
        background: #f9fafb;
        white-space: nowrap;
        font-weight: 700;
      }
      .articles-table a { color: var(--primary); text-decoration: none; }
      .articles-table a:hover { text-decoration: underline; }
      .actions-cell { text-align: right; white-space: nowrap; }

      /* mobile */
      @media (max-width: 640px) {
        .app { padding: 16px 10px 32px; }
        .app-header h1 { font-size: 22px; }
        .card { padding: 14px 14px; }
      }
    </style>
<link rel="icon" href="data:,">
  </head>
  <body>
    <div class="app">
      <header class="app-header">
        <h1>Post Static</h1>
        <p class="subtitle">Трекер платных публикаций VC.ru</p>
      </header>

      <!-- ЛОГИН -->
      <section id="login-section" class="card card--narrow">
        <h2>Вход в админку</h2>
        <form id="login-form" class="form form--vertical">
          <label class="form__field">
            <span>Логин</span>
            <input id="login" type="text" autocomplete="username" placeholder="admin" required />
          </label>

          <label class="form__field">
            <span>Пароль</span>
            <input id="password" type="password" autocomplete="current-password" placeholder="••••••••" required />
          </label>

          <button class="btn" type="submit">Войти</button>
          <p id="login-error" class="error"></p>
          <p class="hint">Логин/пароль задаются в <code>config.json</code>.</p>
        </form>
      </section>

      <!-- АДМИНКА -->
      <section id="admin-section" class="hidden">
        <div class="toolbar card">
          <h2 class="toolbar__title">Админка статистики</h2>
          <div class="toolbar__right">
            <span id="status-label" class="status-label"></span>
            <button id="logout-btn" class="btn btn--secondary">Выйти</button>
          </div>
        </div>

        <!-- Добавить статью -->
        <section class="card">
          <h3>Добавить статью</h3>
          <form id="add-form" class="form-grid">
            <label class="form__field">
              <span>Ссылка на публикацию VC.ru</span>
              <input id="article-url" type="url" placeholder="https://vc.ru/..." required />
            </label>

            <label class="form__field">
              <span>Стоимость размещения (₽)</span>
              <input id="article-cost" type="number" min="0" step="1" placeholder="Например, 15000" required />
            </label>

            <div class="form__actions">
              <button id="add-btn" class="btn" type="submit">Добавить и подтянуть статистику</button>
            </div>
          </form>
          <p id="add-error" class="error"></p>
        </section>

        <!-- Фильтр -->
        <section class="card">
          <h3>Фильтр по периоду</h3>
          <div class="filter-grid">
            <label class="form__field">
              <span>С</span>
              <input id="date-from" type="date" />
            </label>
            <label class="form__field">
              <span>По</span>
              <input id="date-to" type="date" />
            </label>
            <label class="form__field">
              <span>Месяц</span>
              <select id="month-select">
                <option value="all">Все</option>
                <option value="1">Январь</option>
                <option value="2">Февраль</option>
                <option value="3">Март</option>
                <option value="4">Апрель</option>
                <option value="5">Май</option>
                <option value="6">Июнь</option>
                <option value="7">Июль</option>
                <option value="8">Август</option>
                <option value="9">Сентябрь</option>
                <option value="10">Октябрь</option>
                <option value="11">Ноябрь</option>
                <option value="12">Декабрь</option>
              </select>
            </label>
            <div class="form__actions">
              <button id="reset-filter-btn" class="btn btn--secondary" type="button">Сбросить</button>
            </div>
          </div>
        </section>

        <!-- Сводка -->
        <section class="card stats-card">
          <h3>Сводная статистика</h3>
          <div class="stats-grid">
            <div class="stat">
              <div class="stat__label">Публикаций в выборке</div>
              <div id="stat-count" class="stat__value">0</div>
            </div>
            <div class="stat">
              <div class="stat__label">Всего открытий поста</div>
              <div id="stat-opens" class="stat__value">0</div>
            </div>
            <div class="stat">
              <div class="stat__label">Общий бюджет (₽)</div>
              <div id="stat-budget" class="stat__value">0</div>
            </div>
            <div class="stat">
              <div class="stat__label">Средний CPM (₽ за 1000)</div>
              <div id="stat-cpm" class="stat__value">—</div>
            </div>
          </div>
        </section>

        <!-- Таблица -->
        <section class="card">
          <h3>Список статей</h3>
          <div class="table-wrapper">
            <table class="articles-table">
              <thead>
                <tr>
                  <th>Дата публикации</th>
                  <th>Заголовок</th>
                  <th>Ссылка</th>
                  <th>Открытия</th>
                  <th>Стоимость (₽)</th>
                  <th>CPM (₽)</th>
                  <th></th>
                </tr>
              </thead>
              <tbody id="articles-body"></tbody>
            </table>
          </div>
        </section>
      </section>
    </div>

   <script src="/static/app.js"></script>
  </body>
</html>
